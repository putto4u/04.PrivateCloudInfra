도커(Docker)의 내부 구조와 핵심 아키텍처를 이해하는 것은 컨테이너를 효율적으로 관리하기 위한 기초입니다. 도커는 **클라이언트-서버(Client-Server)** 아키텍처를 기반으로 동작하며, 여러 핵심 구성 요소가 상호작용합니다.

---

### 도커 아키텍처의 핵심 구성 요소

도커 시스템은 크게 세 가지 영역으로 나뉩니다: **도커 클라이언트**, **도커 호스트**, **도커 레지스트리**입니다.

#### 1. 도커 클라이언트 (Docker Client)

사용자가 도커와 상호작용하는 주요 수단입니다. `docker run`, `docker build`와 같은 명령어를 입력하면, 클라이언트는 이 명령을 **도커 데몬(Docker Daemon)**에게 전달합니다.

#### 2. 도커 호스트 (Docker Host)

도커가 설치된 물리적 또는 가상 머신입니다. 핵심 서비스인 **도커 데몬**이 상주하며 컨테이너의 생명 주기를 관리합니다.

* **Docker Daemon (dockerd)**: API 요청을 수신하고 이미지, 컨테이너, 네트워크, 볼륨과 같은 도커 객체를 관리합니다.
* **Images**: 컨테이너를 실행하기 위한 읽기 전용 템플릿입니다.
* **Containers**: 이미지의 실행 가능한 인스턴스입니다. 격리된 환경에서 애플리케이션이 돌아가는 실제 공간입니다.

#### 3. 도커 레지스트리 (Docker Registry)

도커 이미지를 저장하고 배포하는 장소입니다.

* **Docker Hub**: 누구나 사용할 수 있는 공개 레지스트리이며 도커의 기본 저장소입니다.
* 기업 내부용으로 **Private Registry**를 구축하여 보안을 강화하기도 합니다.

---

### 도커의 핵심 기술 원리

도커가 가상머신(VM)보다 가볍고 빠른 이유는 리눅스 커널의 기능을 활용하여 프로세스를 격리하기 때문입니다.

[Image comparing Docker containers vs Virtual Machines architecture]

* **Namespaces (네임스페이스)**: 각 컨테이너가 독립된 공간(네트워크, 프로세스 ID, 파일 시스템 등)을 가질 수 있도록 격리하는 기술입니다.
* **Control Groups (cgroups)**: 각 컨테이너가 사용할 수 있는 하드웨어 자원(CPU, 메모리, 대역폭 등)의 한도를 제한하는 기술입니다.
* **Union File Systems (UnionFS)**: 레이어(Layer) 방식을 통해 여러 개의 파일 시스템을 하나의 파일 시스템으로 합쳐서 보여주는 기술입니다. 이를 통해 이미지를 효율적으로 생성하고 공유합니다.

---

### 컨테이너 실행 흐름 (Workflow)

사용자가 `docker run` 명령을 실행했을 때 내부에서 일어나는 과정입니다.

1. **명령 수신**: 도커 클라이언트가 데몬에게 실행 명령을 전달합니다.
2. **이미지 확인**: 데몬은 로컬 호스트에 해당 이미지가 있는지 확인합니다.
3. **이미지 풀(Pull)**: 로컬에 없다면 설정된 레지스트리(Docker Hub 등)에서 이미지를 다운로드합니다.
4. **컨테이너 생성**: 이미지를 기반으로 격리된 컨테이너를 생성합니다.
5. **실행**: 컨테이너에 네트워크와 IP를 할당하고 지정된 애플리케이션을 실행합니다.

> [!IMPORTANT]
> **과금 및 자원 관리**: 도커는 호스트의 커널을 공유하므로 VM보다 효율적이지만, 많은 수의 컨테이너를 실행하면 호스트의 메모리와 CPU 자원을 소모합니다. 특히 AWS EC2에서 실행할 경우 인스턴스 사양(Instance Type)에 따라 처리 능력이 제한되며, 네트워크 트래픽(데이터 전송량)에 따른 비용이 발생할 수 있습니다.

Next Step: **도커 컨테이너와 가상 머신(VM)의 상세 비교**
