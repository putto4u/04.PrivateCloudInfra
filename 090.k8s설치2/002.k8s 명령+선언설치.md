## Kubernetes Control Plane κµ¬μ¶• λ°©μ‹ λΉ„κµ: kubeadm vs YAML (Declarative)

ν΄λ¬μ¤ν„°λ¥Ό μ²μ κµ¬μ¶•ν•  λ•(Provisioning), λ§μ¤ν„° λ…Έλ“(Control Plane)λ¥Ό μ–΄λ–»κ² κµ¬μ„±ν•  κ²ƒμΈμ§€μ— λ€ν• μ„ νƒμ€ μ΄μ ν¨μ¨μ„±κ³Ό μ μ§€λ³΄μ μΈ΅λ©΄μ—μ„ λ§¤μ° μ¤‘μ”ν•©λ‹λ‹¤. 
κ²°λ΅ λ¶€ν„° λ§μ”€λ“λ¦¬λ©΄, **`kubeadm` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•λ, μ„¤μ •κ°’μ€ YAML νμΌ(Configuration File)λ΅ κ΄€λ¦¬ν•λ” λ°©μ‹**μ΄ κ°€μ¥ κ¶μ¥λ©λ‹λ‹¤.

---

### 1. λ…λ Ήν• μ„¤μΉ (`kubeadm init` μµμ… μ‚¬μ©)

λ…λ Ήμ–΄ λ’¤μ— λ‹¤μ–‘ν• ν”λκ·Έ(Flag)λ¥Ό λ¶™μ—¬ λ§μ¤ν„° λ…Έλ“λ¥Ό μ΄κΈ°ν™”ν•λ” λ°©μ‹μ…λ‹λ‹¤.

* **μμ‹:** `kubeadm init --pod-network-cidr=10.244.0.0/16 --apiserver-advertise-address=192.168.1.10 ...`
* **μ¥μ :** λ³„λ„μ νμΌ μƒμ„± μ—†μ΄ ν• μ¤„λ΅ λΉ λ¥΄κ² ν΄λ¬μ¤ν„°λ¥Ό λ„μΈ μ μμ–΄ 1νμ„± ν…μ¤νΈμ— μ ν•©ν•©λ‹λ‹¤.
* **λ‹¨μ :** μ„¤μ • ν•­λ©μ΄ λ§μ•„μ§μλ΅ λ…λ Ήμ–΄κ°€ κΈΈμ–΄μ§€κ³  λ³µμ΅ν•΄μ§‘λ‹λ‹¤. λ‚μ¤‘μ— λ‘κ°™μ€ μ„¤μ •μ„ μ¬ν„ν•κ±°λ‚ ν€μ›κ³Ό κ³µμ ν•κΈ° μ–΄λ µμµλ‹λ‹¤.

### 2. μ„ μ–Έν• μ„¤μΉ (`kubeadm init --config` νμΌ μ‚¬μ©)

λ¨λ“  μ„¤μΉ μµμ…μ„ YAML ν•μ‹μ μ„¤μ • νμΌμ— λ―Έλ¦¬ μ‘μ„±ν•κ³  μ΄λ¥Ό μ°Έμ΅°ν•μ—¬ μ„¤μΉν•λ” λ°©μ‹μ…λ‹λ‹¤.

* **μμ‹:** `kubeadm init --config=kubeadm-config.yaml`
* **μ¥μ :**
* **λ¬Έμ„ν™”:** μ–΄λ–¤ μµμ…μΌλ΅ λ§μ¤ν„°κ°€ κµ¬μ„±λμ—λ”μ§€ νμΌ ν•λ‚λ΅ λ…ν™•ν μ• μ μμµλ‹λ‹¤.
* **μ •λ°€ν• μ μ–΄:** CLI ν”λκ·Έλ΅ μ κ³µλμ§€ μ•λ” μ„Έλ¶€μ μΈ API Server, Scheduler, Controller Managerμ νλΌλ―Έν„°λ¥Ό YAML λ‚΄μ—μ„ μƒμ„Έν μ΅°μ •ν•  μ μμµλ‹λ‹¤.
* **μ¬ν„μ„±:** ν΄λ¬μ¤ν„°λ¥Ό μ¬κµ¬μ¶•ν•κ±°λ‚ ν™•μ¥ν•  λ• λ™μΌν• ν™κ²½μ„ λ³΄μ¥ν•©λ‹λ‹¤.



---

### 3. μ™ 'μ„ μ–Έν•(YAML)' μ„¤μΉκ°€ μ „λ¬Έκ°€μ μ„ νƒμΈκ°€?

λ§μ¤ν„° λ…Έλ“μ κµ¬μ„± μ”μ†(API Server, ETCD λ“±)λ” μΏ λ²„λ„¤ν‹°μ¤ λ‚΄λ¶€μ—μ„ **Static Pod** ν•νƒλ΅ κ΄€λ¦¬λ©λ‹λ‹¤. μ΄λ¥Ό μ§μ ‘ λ…λ Ήμ–΄λ΅ μ μ–΄ν•λ” κ²ƒμ€ ν•κ³„κ°€ μμΌλ©°, νΉν **μ—…κ·Έλ μ΄λ“(Upgrade)** μ‹μ μ΄ μ™”μ„ λ• YAML μ„¤μ • νμΌμ΄ μ—†μΌλ©΄ κΈ°μ΅΄ μ„¤μ •μ„ μΌμΌμ΄ κΈ°μ–µν•΄λ‚΄μ•Ό ν•λ” μ„ν—μ΄ λ”°λ¦…λ‹λ‹¤.

| κµ¬λ¶„ | λ…λ Ήν• (CLI Flags) | μ„ μ–Έν• (kubeadm Config YAML) |
| --- | --- | --- |
| **κ°€λ…μ„±** | λ‚®μ (κΈΈκ³  λ³µμ΅ν•¨) | λ†’μ (κµ¬μ΅°ν™”λ¨) |
| **κ΄€λ¦¬ λ€μƒ** | μΌμ‹μ μΈ λ…λ Ήμ–΄ κΈ°λ΅ | Git λ“±μ— μ €μ¥ κ°€λ¥ν• μ½”λ“ |
| **κ³ κΈ‰ μ„¤μ •** | μ ν•μ μ„ | λ¨λ“  μ»΄ν¬λ„νΈ μ»¤μ¤ν…€ κ°€λ¥ |
| **κ¶μ¥ μƒν™©** | λΉ λ¥Έ λ΅μ»¬ ν…μ¤νΈ (Minikube λ“±) | **μ΄μ ν™κ²½ λ° κ°€μ©μ„±(HA) κµ¬μ„±** |

---

### π’΅ μ‹¤μ „ κ°€μ΄λ“: YAMLλ΅ λ§μ¤ν„° λ…Έλ“ κµ¬μ¶•ν•κΈ°

μ „λ¬Έκ°€λ” λ‹¤μκ³Ό κ°™μ΄ κΈ°λ³Έ μ„¤μ • νμΌμ„ μƒμ„±ν• ν›„ μμ •ν•μ—¬ μ„¤μΉλ¥Ό μ§„ν–‰ν•©λ‹λ‹¤.

1. **κΈ°λ³Έ μ„¤μ • νμΌ μ¶”μ¶:**
```bash
kubeadm config print init-defaults > kubeadm-config.yaml

```


2. **YAML νμΌ μμ •:** λ‚΄λ¶€μ `advertiseAddress`, `nodeRegistration`, `networking` μ„¤μ • λ“±μ„ λ³ΈμΈμ μΈν”„λΌ ν™κ²½μ— λ§μ¶° μμ •ν•©λ‹λ‹¤.
3. **λ§μ¤ν„° μ„¤μΉ μ‹¤ν–‰:**
```bash
kubeadm init --config=kubeadm-config.yaml

```



μ΄ λ°©μ‹μ„ μ‚¬μ©ν•λ©΄ μ„¤μΉ κ³Όμ • μμ²΄κ°€ ν•λ‚μ 'μΈν”„λΌ μ½”λ“'κ°€ λμ–΄ κ΄€λ¦¬ ν¨μ¨μ΄ κ·Ήλ€ν™”λ©λ‹λ‹¤.

---

λ§μ¤ν„° λ…Έλ“ κµ¬μ¶• μ‹μ μ—μ„ CLIμ™€ YAMLμ μ „λµμ  μ°¨μ΄μ μ„ μ •λ¦¬ν•΄ λ“λ Έμµλ‹λ‹¤.

Next Step: kubeadm-config.yaml μ£Όμ” νλΌλ―Έν„° λ¶„μ„ν•κΈ°
