
---

## μΏ λ²„λ„¤ν‹°μ¤ v1.30.14 ν΄λ¬μ¤ν„° κµ¬μ¶• μµμΆ… μ‹¤λ¬΄ ν”„λ΅μ„Έμ¤

μ‹¤λ¬΄μ—μ„λ” **'μΈν”„λΌμ μƒνƒλ¥Ό μ½”λ“λ΅ κ΄€λ¦¬(IaC)'**ν•κΈ° μ„ν•΄ λ¨λ“  μ„¤μ •κ°’μ„ YAML νμΌμ— λ…μ‹ν•κ³ , μ΄λ¥Ό ν†µν•΄ ν΄λ¬μ¤ν„°μ μΌκ΄€μ„±μ„ μ μ§€ν•©λ‹λ‹¤.

### 1. κµ¬μ¶• κ³µμ • λ©μ°¨

1. **[μ‚¬μ „ μ„¤μ •]** μ»¤λ„ λ¨λ“ λ° λ„¤νΈμ›ν¬ νλΌλ―Έν„° μµμ ν™” (λ¨λ“  λ…Έλ“)
2. **[λ°νƒ€μ„ μ¤€λΉ„]** Containerd μ„¤μΉ λ° Cgroup Driver μ„¤μ • (λ¨λ“  λ…Έλ“)
3. **[λ„κµ¬ μ„¤μΉ]** K8s v1.30.14 ν¨ν‚¤μ§€ μ„¤μΉ λ° κ³ μ • (λ¨λ“  λ…Έλ“)
4. **[μ„¤κ³„]** `v1beta4` κΈ°λ° λ§μ¤ν„° λ…Έλ“ μ„¤μ • νμΌ(YAML) μƒμ„± λ° μμ •
5. **[κµ¬μ¶•]** YAML κΈ°λ° λ§μ¤ν„° λ…Έλ“ μ΄κΈ°ν™” λ° κ΄€λ¦¬μ ν™κ²½ μ„¤μ •
6. **[λ„¤νΈμ›ν¬]** νλ“ κ°„ ν†µμ‹ μ„ μ„ν• CNI(Calico) λ°°ν¬
7. **[ν™•μ¥]** Join Tokenμ„ μ΄μ©ν• μ›μ»¤ λ…Έλ“ μ—°κ²° λ° μµμΆ… κ²€μ¦

---

### 2. λ‹¨κ³„λ³„ μ‹¤ν–‰ κ°€μ΄λ“

#### 1λ‹¨κ³„: OS ν™κ²½ μµμ ν™” (λ¨λ“  λ…Έλ“)

μΏ λ²„λ„¤ν‹°μ¤κ°€ λ…Έλ“ κ°„ λ„¤νΈμ›ν¬ ν¨ν‚·μ„ μ •μƒμ μΌλ΅ λΌμ°ν…ν•  μ μλ„λ΅ μ„¤μ •ν•©λ‹λ‹¤.

```bash
# μ¤μ™‘ λΉ„ν™μ„±ν™” λ° μκµ¬ μ μ©
sudo swapoff -a && sudo sed -i '/swap/s/^/#/' /etc/fstab

# μ»¤λ„ λ¨λ“ λ΅λ“ (λ„¤νΈμ›ν¬ λΈλ¦Ώμ§€ λ° μ¤λ²„λ μ΄)
cat <<EOF | sudo tee /etc/modules-load.d/k8s.conf
overlay
br_netfilter
EOF
sudo modprobe overlay && sudo modprobe br_netfilter

# λ„¤νΈμ›ν¬ νλΌλ―Έν„° μ„¤μ • (L3 ν¬μ›λ”© ν™μ„±ν™”)
cat <<EOF | sudo tee /etc/sysctl.d/k8s.conf
net.bridge.bridge-nf-call-iptables  = 1
net.bridge.bridge-nf-call-ip6tables = 1
net.ipv4.ip_forward                 = 1
EOF
sudo sysctl --system

```

#### 2λ‹¨κ³„: μ»¨ν…μ΄λ„ λ°νƒ€μ„(Containerd) μµμ ν™” (λ¨λ“  λ…Έλ“)

λ°νƒ€μ„ μ„¤μΉ ν›„, μΏ λ²„λ„¤ν‹°μ¤μ™€μ OS κ΄€λ¦¬ λ°©μ‹(systemd)μ„ μΌμΉμ‹ν‚¤λ” μ‘μ—…μ΄ ν•„μμ…λ‹λ‹¤.

```bash
sudo apt-get update && sudo apt-get install -y containerd

# κΈ°λ³Έ μ„¤μ • μƒμ„± λ° SystemdCgroup ν™μ„±ν™” μμ •
sudo mkdir -p /etc/containerd
containerd config default | sudo tee /etc/containerd/config.toml
sudo sed -i 's/SystemdCgroup = false/SystemdCgroup = true/g' /etc/containerd/config.toml
sudo systemctl restart containerd

```

#### 3λ‹¨κ³„: K8s λ„κµ¬ μ„¤μΉ (λ¨λ“  λ…Έλ“)

μ§λ¬Έν•μ‹  **v1.30.14** λ²„μ „μ„ λ…μ‹ν•μ—¬ μ„¤μΉν•©λ‹λ‹¤.

```bash
# λ ν¬μ§€ν† λ¦¬ μ„¤μ • ν›„ λ²„μ „ λ…μ‹ν•μ—¬ μ„¤μΉ
sudo apt-get install -y kubelet=1.30.14-1.1 kubeadm=1.30.14-1.1 kubectl=1.30.14-1.1
sudo apt-mark hold kubelet kubeadm kubectl

```

#### 4λ‹¨κ³„: `v1beta4` κΈ°λ° μ„¤κ³„λ„ μ‘μ„± (λ§μ¤ν„° λ…Έλ“)

μ„¤μΉ μ „, ν„μ¬ λ²„μ „μ— λ§λ” μµμ‹  ν…ν”λ¦Ώμ„ μ¶”μ¶ν•κ³  μμ •ν•©λ‹λ‹¤.

```bash
kubeadm config print init-defaults --component-configs KubeletConfiguration > kubeadm-init.yaml
# vi kubeadm-init.yaml μ‹¤ν–‰ν•μ—¬ μ•„λ ν•µμ‹¬ λ‚΄μ© μμ •
# 1. advertiseAddress: λ§μ¤ν„°IP
# 2. kubernetesVersion: 1.30.14
# 3. podSubnet: 10.244.0.0/16
# 4. cgroupDriver: systemd (KubeletConfiguration μ„Ήμ…)

```

#### 5λ‹¨κ³„: λ§μ¤ν„° λ…Έλ“ κ°€λ™ λ° κ΄€λ¦¬ κ¶ν• λ¶€μ—¬ (λ§μ¤ν„° λ…Έλ“)

```bash
# μ„ μ–Έν• κµ¬μ¶• μ‹¤ν–‰
sudo kubeadm init --config kubeadm-init.yaml

# κ΄€λ¦¬μ(kubectl) κ¶ν• μ„¤μ • (μ΄ μ‘μ—…μ΄ λΉ μ§€λ©΄ kubectl λ…λ Ήμ΄ μ‘λ™ν•μ§€ μ•μ)
mkdir -p $HOME/.kube
sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
sudo chown $(id -u):$(id -g) $HOME/.kube/config

```

#### 6λ‹¨κ³„: νλ“ λ„¤νΈμ›ν¬(CNI) λ°°ν¬ (λ§μ¤ν„° λ…Έλ“)

λ…Έλ“ μƒνƒλ¥Ό `Ready`λ΅ λ§λ“¤κ³  νλ“ κ°„ ν†µμ‹ μ„ ν™μ„±ν™”ν•©λ‹λ‹¤.

```bash
# Calico CNI μ„¤μΉ (μ‹¤λ¬΄ ν‘μ¤€ μ¤‘ ν•λ‚)
kubectl apply -f https://raw.githubusercontent.com/projectcalico/calico/v3.28.0/manifests/calico.yaml

```

#### 7λ‹¨κ³„: μ›μ»¤ λ…Έλ“ μ΅°μΈ λ° μƒνƒ ν™•μΈ

```bash
# μ›μ»¤ λ…Έλ“μ—μ„ λ§μ¤ν„°κ°€ λ°ν–‰ν• μ΅°μΈ ν† ν° μ‹¤ν–‰
sudo kubeadm join 192.168.1.10:6443 --token ...

# λ§μ¤ν„°μ—μ„ λ…Έλ“ μƒνƒ μµμΆ… ν™•μΈ
kubectl get nodes

```

---

### π’΅ μ‹¤μ „ ν: λ„λ½λκΈ° μ‰¬μ΄ ν¬μΈνΈ

* **Firewall:** μ‹¤λ¬΄μ—μ„λ” `ufw`λ‚ `iptables`μ—μ„ 6443(API Server), 2379-2380(ETCD) λ“±μ ν¬νΈκ°€ μ—΄λ ¤ μλ”μ§€ λ°λ“μ‹ μ²΄ν¬ν•΄μ•Ό ν•©λ‹λ‹¤.
* **CRI-Socket:** μ—¬λ¬ λ°νƒ€μ„μ΄ μ„¤μΉλ κ²½μ° `kubeadm init` μ‹ μ–΄λ–¤ μ†μΌ“μ„ μ‚¬μ©ν• μ§€ YAMLμ— λ…ν™•ν λ…μ‹ν•΄μ•Ό μ¶©λμ΄ μ—†μµλ‹λ‹¤.

---

μ”μ²­ν•μ‹  λ€λ΅ μ „ν›„ ν•„μ μ²λ¦¬ κ³Όμ •μ„ λ¨λ‘ ν¬ν•¨ν•μ—¬ v1.30.14 κΈ°μ¤€μ μµμΆ… κµμ¬μ© κ°€μ΄λ“λ¥Ό μ™„μ„±ν–μµλ‹λ‹¤.

## Next Step: μΏ λ²„λ„¤ν‹°μ¤ λ€μ‹λ³΄λ“(Dashboard) λ° λ©”νΈλ¦­ μ„λ²„ κµ¬μ¶•


