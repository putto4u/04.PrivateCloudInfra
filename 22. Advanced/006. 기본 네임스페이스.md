## Kubernetes 네임스페이스(Namespace) 관리 및 운영

쿠버네티스에서 **네임스페이스(Namespace)**는 단일 클러스터 내의 리소스들을 논리적으로 격리하는 가상 클러스터 역할을 합니다. 다수의 팀이나 프로젝트가 하나의 클러스터를 공유할 때 리소스 간의 간섭을 방지하고 관리 효율을 높이는 핵심적인 구성 요소입니다.

---

### 1. 기본 생성 네임스페이스 이해

클러스터 초기화 시 시스템 운영을 위해 자동으로 생성되는 주요 네임스페이스는 다음과 같습니다.

* **default:** 별도의 네임스페이스를 지정하지 않고 생성하는 모든 리소스가 배치되는 기본 공간입니다.
* **kube-system:** 쿠버네티스 시스템 자체의 핵심 컴포넌트(API Server, Scheduler, DNS 등)가 실행되는 보호된 공간입니다.
* **kube-public:** 클러스터의 전체 정보를 공개하기 위한 용도로 사용되며, 인증되지 않은 사용자도 읽기 권한을 가질 수 있는 특별한 네임스페이스입니다.
* **kube-node-lease:** 각 노드의 가용성 상태를 확인하기 위한 Lease 객체들이 위치하며, 클러스터 성능 향상을 위해 분리되어 관리됩니다.

---

### 2. 기본 작업 네임스페이스 고정하기

매번 명령어에 `-n <namespace>` 옵션을 추가하는 번거로움을 줄이기 위해, 현재 사용 중인 **컨텍스트(Context)**의 기본 네임스페이스를 변경할 수 있습니다.

#### 현재 설정 확인

현재 어떤 네임스페이스가 기본으로 설정되어 있는지 확인합니다.

```bash
kubectl config view --minify | grep namespace

```

#### 기본 네임스페이스 영구 변경

특정 네임스페이스(예: `dev-project`)를 생성하고, 이를 기본값으로 고정하는 절차입니다.

```bash
# 1. 네임스페이스 생성
kubectl create namespace dev-project

# 2. 현재 컨텍스트의 기본 네임스페이스를 dev-project로 전환
kubectl config set-context --current --namespace=dev-project

```

이후 실행하는 모든 `kubectl` 명령어는 자동으로 `dev-project` 네임스페이스를 대상으로 수행됩니다.

---

### 3. 효율적인 관리를 위한 유틸리티 활용

명령어 라인에서 네임스페이스를 빠르게 전환하고 상태를 확인하기 위해 다음의 도구들을 권장합니다.

#### kubens 사용

`kubectx` 패키지에 포함된 `kubens` 도구를 사용하면 복잡한 `kubectl config` 명령어 없이도 직관적인 전환이 가능합니다.

```bash
# 네임스페이스 목록 조회 및 현재 위치 확인
kubens

# 기본 네임스페이스를 'production'으로 변경
kubens production

```

#### 쉘 별칭(Alias) 설정

터미널 환경 설정 파일(`.bashrc` 또는 `.zshrc`)에 아래 내용을 추가하여 입력 속도를 개선합니다.

```bash
alias k='kubectl'
alias kn='kubens'
# 현재 컨텍스트와 네임스페이스를 프롬프트에 표시하도록 설정하는 것을 권장합니다.

```

---

### 4. 운영 가이드 및 주의사항

* **논리적 격리 vs 물리적 격리:** 네임스페이스는 논리적인 구분일 뿐, 노드나 네트워크를 물리적으로 완전히 격리하지 않습니다. 보안 강화가 필요하다면 **Network Policy**를 병행하여 트래픽을 제어해야 합니다.
* **리소스 할당 제한:** 모든 팀이 `default` 네임스페이스를 공유하면 자원 충돌이 발생합니다. 각 네임스페이스별로 `ResourceQuota`를 설정하여 사용 가능한 CPU와 메모리의 상한선을 정의하는 것이 필수적입니다.

> [!IMPORTANT]
> **AWS 환경 과금 안내:** > * 네임스페이스 생성 및 설정 변경 자체는 **무료**이며 AWS 과금에 영향을 주지 않습니다.
> * 단, 특정 네임스페이스에서 `type: LoadBalancer` 서비스를 생성할 경우 AWS **NLB/ALB가 자동 생성**되어 시간당 이용 요금이 발생합니다.
> * 네임스페이스별로 리소스 제한을 걸지 않을 경우, 특정 네임스페이스의 과도한 자원 점유로 인해 EC2 인스턴스 사양 상향이 필요하게 되어 운영 비용이 상승할 수 있습니다.
> 
> 

---

Next Step: Resource Quota와 LimitRange를 이용한 자원 관리

---

네임스페이스를 고정하고 관리하는 표준 절차를 정리하였습니다. 특히 운영 환경에서 실수를 방지하기 위한 `kubens` 활용과 프롬프트 가시화 설정은 실무에서 매우 중요한 비중을 차지합니다. 추가적인 도구 설치나 자동화 스크립트가 필요하시면 말씀해 주세요.
