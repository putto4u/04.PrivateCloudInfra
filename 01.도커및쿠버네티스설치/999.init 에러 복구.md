쿠버네티스 마스터 노드 네트워크 복구 가이드
쿠버네티스 초기화(`kubeadm init`) 중 네트워크 오류 발생 시 복구 절차입니다.

1. 쿠버네티스 및 설정 초기화

• `sudo kubeadm reset -f`

• `rm -rf $HOME/.kube`

2. 네트워크 인터페이스 및 설정 삭제

• CNI 인터페이스 삭제: `sudo ip link delete cni0`, `sudo ip link delete flannel.1`

• iptables 규칙 초기화: `sudo iptables -F && sudo iptables -t nat -F && sudo iptables -t mangle -F && sudo iptables -X`

• 설정 파일 삭제: `sudo rm -rf /etc/cni/net.d`, `sudo rm -rf /var/lib/cni/`

3. 컨테이너 런타임 정리

• 모든 컨테이너 삭제: `docker rm -f $(docker ps -aq)`

• 런타임 재시작: `sudo systemctl restart containerd` 또는 `docker`

4. 재시도 시 유의사항

• IP 포워딩 확인: `sudo sysctl -w net.ipv4.ip_forward=1`

• `init` 시 CIDR 지정: `sudo kubeadm init --pod-network-cidr=192.168.0.0/16`
