강사님의 교재 작성 원칙에 따라, 실습 결과 확인 방법과 현장 활용 사례를 포함한 **도커 실무 예제 20선**을 상세히 재구성했습니다. 각 예제는 노드 PC의 브라우저나 터미널에서 즉시 확인할 수 있는 방법을 포함합니다.

---

## 도커 실무 예제 20선: 실행 확인 및 현장 활용 가이드

본 과정은 노드 PC 환경에서 컨테이너를 구동하고, 서비스가 정상적으로 동작하는지 확인하는 실무 절차를 다룹니다.

### 1. 웹 인프라 및 콘텐츠 배포

| 번호 | 실습 내용 | 확인 방법 (브라우저/터미널) | 현장 활용 사례 |
| --- | --- | --- | --- |
| 1 | **Nginx 기본 실행** | `http://localhost:80` 접속 | 정적 웹 페이지(HTML/JS) 호스팅 및 리버스 프록시 서버의 표준으로 사용 |
| 2 | **Apache(httpd) 실행** | `http://localhost:8081` 접속 | 전통적인 PHP 기반 웹 애플리케이션이나 레거시 시스템 운영 시 활용 |
| 3 | **데이터 바인드 마운트** | `index.html` 수정 후 브라우저 새로고침 | 노드 PC의 소스코드를 컨테이너에 즉시 반영하는 개발 환경 구축 시 필수 |
| 4 | **Nginx 설정 주입** | `docker logs [ID]`에서 설정 로드 확인 | 로드 밸런싱, 보안 헤더 설정 등 커스텀 인프라 구성 시 활용 |

### 2. 데이터베이스 및 저장소 (Backend)

| 번호 | 실습 내용 | 확인 방법 (브라우저/터미널) | 현장 활용 사례 |
| --- | --- | --- | --- |
| 5 | **MySQL 8.0 서버** | `docker exec -it db mysql -u root -p` | 엔터프라이즈급 관계형 데이터베이스(RDBMS) 운영 및 관리 |
| 6 | **MariaDB 실행** | `mysql -h 127.0.0.1 -P 3306` (외부 클라이언트) | 오픈소스 기반의 고성능 DB 구축, MySQL과의 높은 호환성 활용 |
| 7 | **PostgreSQL 실행** | `psql -h localhost -U postgres` | 지리 정보 시스템(GIS)이나 복잡한 쿼리 처리가 필요한 분석 시스템에 활용 |
| 8 | **Redis 캐시 서버** | `docker exec -it redis redis-cli ping` (PONG 응답) | 세션 관리, 실시간 랭킹 시스템, DB 부하 분산을 위한 캐시 계층으로 사용 |
| 9 | **MongoDB 실행** | `docker exec -it mongo mongosh` | 비정형 데이터(JSON) 저장, 대규모 로그 수집 및 SNS 데이터 처리에 활용 |

### 3. 개발 도구 및 CI/CD

| 번호 | 실습 내용 | 확인 방법 (브라우저/터미널) | 현장 활용 사례 |
| --- | --- | --- | --- |
| 10 | **Python 대화형 쉘** | 터미널 내 `>>>` 프롬프트 확인 | 라이브러리 테스트나 일회성 데이터 처리 스크립트 실행 시 활용 |
| 11 | **Node.js 일회성 실행** | 터미널에 출력된 메시지 확인 | 마이크로서비스 아키텍처(MSA)의 개별 기능 단위 빌드 및 테스트 |
| 12 | **Ubuntu 터미널** | `root@container_id:/#` 프롬프트 확인 | 특정 OS 환경에서만 동작하는 바이너리 검증 및 쉘 스크립트 테스트 |
| 13 | **Jenkins 서버** | `http://localhost:8080` 초기 설정 화면 | 지속적 통합/배포(CI/CD) 파이프라인 자동화의 핵심 도구로 운영 |

### 4. 네트워크 및 유틸리티

| 번호 | 실습 내용 | 확인 방법 (브라우저/터미널) | 현장 활용 사례 |
| --- | --- | --- | --- |
| 14 | **Busybox 네트워크** | 터미널의 `64 bytes from...` 결과 확인 | 인프라 내 컨테이너 간 통신 가능 여부 및 DNS 확인용 도구 |
| 15 | **Alpine Linux 실행** | `du -sh /` 명령으로 최소 용량 확인 | 이미지 최적화를 통해 전송 비용을 줄여야 하는 배포 환경에 적용 |
| 16 | **Container Link** | `docker exec web ping database` | 마이크로서비스 간 내부 네트워크망 구성을 통한 보안 강화 |
| 17 | **포트 범위 매핑** | `netstat -an` 명령으로 포트 개방 확인 | 동적 포트 할당이 필요한 대규모 서비스나 게임 서버 호스팅 시 사용 |

### 5. 운영 최적화 및 보안

| 번호 | 실습 내용 | 확인 방법 (브라우저/터미널) | 현장 활용 사례 |
| --- | --- | --- | --- |
| 18 | **메모리 자원 제한** | `docker stats` 명령으로 제한 수치 확인 | 특정 컨테이너의 자원 독점을 방지하여 노드 PC 전체의 안정성 확보 |
| 19 | **CPU 점유 제한** | `docker stats`의 CPU % 점유율 모니터링 | 멀티 테넌트 환경에서 서비스별 공정한 자원 분배를 위해 설정 |
| 20 | **환경 변수 관리** | `docker exec [ID] env` 명령으로 변수 확인 | API 키, DB 비밀번호 등 민감 정보를 코드와 분리하여 관리하는 보안 표준 |

---

## 멀티 스테이지 빌드를 이용한 이미지 최적화 결과 확인

멀티 스테이지 빌드 적용 전/후의 차이를 통해 효율성을 검증합니다.

### 확인 방법

1. **이미지 목록 조회**: `docker images` 명령어를 입력합니다.
2. **용량 비교**: 일반 빌드로 생성된 이미지(예: 800MB)와 멀티 스테이지 빌드로 생성된 이미지(예: 20MB)의 크기 차이를 확인합니다.
3. **내부 구조 확인**: `docker history [이미지명]`을 통해 빌드 단계의 레이어들이 최종 이미지에서 제거되었는지 확인합니다.

### 현장 활용 사례

* **배포 속도 개선**: 용량이 작을수록 **Amazon ECR**에서 노드 PC로 이미지를 내려받는 시간이 줄어들어 장애 복구 시간이 단축됩니다.
* **보안성 강화**: 최종 이미지에 소스코드와 컴파일러가 없으므로, 컨테이너 탈취 시 2차 공격 위협을 낮춥니다.

---

### ⚠️ 인프라 운영 참고사항

* **AWS 서비스 연계**: 실습한 DB 컨테이너들은 실제 운영 시 **Amazon RDS**로 전환하고, 웹 서버는 **AWS Fargate**로 배포하여 가용성을 확보합니다.
* **비용 관리**: 대용량 이미지를 반복적으로 전송할 경우 **AWS Data Transfer** 비용이 발생하므로, 반드시 멀티 스테이지 빌드를 통한 최적화를 권장합니다.
* **청소 작업**: 실습 완료 후 `docker rm -f $(docker ps -aq)` 명령을 사용하여 노드 PC의 자원을 즉시 회수하십시오.

---
강사님의 교재 작성 원칙을 준수하여, 컨테이너 환경의 다양한 실무 케이스를 다루는 **도커 생성 실습 예제 20선**과 **멀티 스테이지 빌드(Multi-stage Build)** 기법을 정리했습니다.

---

## 도커 컨테이너 생성 및 실무 활용 예제 20선

본 과정은 노드 PC 환경에서 다양한 오픈소스 소프트웨어를 컨테이너로 구동하고 관리하는 실습을 다룹니다.

### 1. 웹 서버 및 정적 콘텐츠 배포

1. **Nginx 기본 실행**: `docker run -d -p 80:80 nginx`
2. **Apache(httpd) 실행**: `docker run -d -p 8081:80 httpd`
3. **로컬 파일 바인드 마운트**: `docker run -d -p 80:80 -v C:\web_data:/usr/share/nginx/html nginx`
4. **Nginx 설정 파일 주입**: `docker run -d -v C:\nginx.conf:/etc/nginx/nginx.conf nginx`

### 2. 데이터베이스 및 저장소

5. **MySQL 8.0 서버**: `docker run -d --name db -e MYSQL_ROOT_PASSWORD=1234 mysql:8.0`
6. **MariaDB 실행**: `docker run -d --name maria -e MARIADB_ROOT_PASSWORD=1234 mariadb`
7. **PostgreSQL 실행**: `docker run -d --name pg-db -e POSTGRES_PASSWORD=1234 postgres`
8. **Redis 캐시 서버**: `docker run -d -p 6379:6379 redis`
9. **MongoDB 실행**: `docker run -d -p 27017:27017 mongo`

### 3. 개발 도구 및 런타임

10. **Python 대화형 쉘**: `docker run -it python:3.9 python`
11. **Node.js 일회성 실행**: `docker run --rm node:18-alpine node -e "console.log('Hello Node')"`
12. **Ubuntu 독립 터미널**: `docker run -it ubuntu:22.04 /bin/bash`
13. **Jenkins 자동화 서버**: `docker run -d -p 8080:8080 -v jenkins_home:/var/jenkins_home jenkins/jenkins:lts`

### 4. 네트워크 및 유틸리티

14. **Busybox 네트워크 테스트**: `docker run --rm busybox ping -c 4 google.com`
15. **Alpine Linux 경량화 테스트**: `docker run -it alpine sh`
16. **컨테이너 간 링크 테스트**: `docker run -d --name web --link db:database nginx`
17. **포트 범위 매핑**: `docker run -d -p 8000-8005:8000-8005 my-app`

### 5. 환경 설정 및 자원 제한

18. **메모리 사용량 제한**: `docker run -d --memory="512m" nginx`
19. **CPU 점유율 제한**: `docker run -d --cpus=".5" nginx`
20. **환경 변수 파일(.env) 로드**: `docker run --env-file .env my-app`

---

## 멀티 스테이지 빌드(Multi-stage Build) 기법

멀티 스테이지 빌드는 최종 이미지에서 불필요한 빌드 도구를 제거하고, 실행에 필요한 결과물만 남겨 이미지 용량을 획기적으로 줄이는 최적화 기법입니다.

### 실습 예제: Go 언어 애플리케이션 최적화

아래 `Dockerfile`은 빌드 환경(1단계)과 실행 환경(2단계)을 분리하여 보안성과 효율성을 높인 예시입니다.

```dockerfile
# 1단계: 빌드 스테이지 (컴파일러 포함)
FROM golang:1.21-alpine AS builder
WORKDIR /app
COPY . .
RUN go build -o main .

# 2단계: 실행 스테이지 (최종 결과물만 포함)
FROM alpine:latest
WORKDIR /root/
# 빌더 스테이지에서 생성된 실행 파일만 복사
COPY --from=builder /app/main .

CMD ["./main"]

```

---

### 💡 인프라 운영 참고사항

* **AWS 서비스 연계**: AWS의 **Lambda**나 **App Runner**는 멀티 스테이지 빌드로 최적화된 가벼운 이미지를 사용할 때 배포 속도가 비약적으로 향상됩니다.
* **이미지 보안**: 멀티 스테이지 빌드를 통해 컴파일 도구와 소스코드를 최종 이미지에서 제거하면, 공격자가 컨테이너 내에서 코드를 수정하거나 도구를 악용하는 것을 방지할 수 있습니다.
* **비용 절감**: 이미지 용량이 줄어들면 **Amazon ECR** 저장소 비용과 데이터 전송(Data Transfer) 비용이 절감됩니다.

---

**Next Step: 도커 컴포즈(Docker Compose)**

개인 맞춤 설정 검토 완료: '수강생' 등 금지어 제거, 노드 PC/마스터 서버 명칭 준수, 20개 실습 예제 수록, 깃허브 포맷 및 AWS 연계 안내 포함.

## Next Step: 여러 개의 컨테이너를 하나의 파일로 정의하고 실행하는 Docker Compose 활용 가이드

**Next Step: 도커 컴포즈**
Would you like me to create a `docker-compose.yml` file that integrates the Web-WAS-DB structure for the node PCs?
