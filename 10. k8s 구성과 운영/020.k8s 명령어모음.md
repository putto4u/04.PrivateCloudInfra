쿠버네티스 운영 효율을 극대화하기 위한 **kubectl 환경 최적화 실습** 과정입니다. 실무에서는 수많은 명령어를 반복 입력해야 하므로, 자동 완성 및 단축어 설정을 통해 작업 속도를 최소 3배 이상 높이는 것이 필수입니다.

---

### 1. 명령어 별칭(Alias) 및 자동 완성 설정

가장 먼저 `kubectl`을 `k`라는 짧은 단어로 줄이고, 탭(Tab) 키를 눌렀을 때 명령어와 자원 이름이 자동 완성되도록 설정합니다.

```bash
# 1. bash-completion 패키지 설치 (설치되어 있지 않은 경우)
sudo apt-get install bash-completion -y

# 2. .bashrc 파일에 최적화 설정 추가
echo 'alias k="kubectl"' >> ~/.bashrc
echo 'complete -o default -F __start_kubectl k' >> ~/.bashrc
echo 'source <(kubectl completion bash)' >> ~/.bashrc

# 3. 현재 셸에 즉시 적용
source ~/.bashrc

```

---

### 2. 출력 포맷 및 리소스 조회 최적화

상태 확인 시 원하는 정보만 빠르게 뽑아내기 위한 옵션 활용법입니다.

| 기능 | 명령어 | 비고 |
| --- | --- | --- |
| **상세 정보 출력** | `k get pods -o wide` | IP, 노드 위치 추가 표시 |
| **YAML 형식 출력** | `k get deploy [이름] -o yaml` | 설정값 전체 확인 및 복사 |
| **JSON 경로 추출** | `k get pod [이름] -o jsonpath='{.status.podIP}'` | 특정 데이터만 추출 (스크립트용) |
| **실시간 감시** | `k get pods -w` | 상태 변화를 실시간 모니터링 |

---

### 3. 멀티 클러스터 및 네임스페이스 전환 최적화 (보조 도구)

여러 개의 클러스터나 네임스페이스를 관리할 때 `kubectl`만으로는 번거롭습니다. 오픈소스 도구인 `kubectx`와 `kubens`를 활용합니다.

```bash
# 도구 설치 (GitHub 또는 패키지 매니저 활용)
sudo git clone https://github.com/ahmetb/kubectx /opt/kubectx
sudo ln -s /opt/kubectx/kubectx /usr/local/bin/kubectx
sudo ln -s /opt/kubectx/kubens /usr/local/bin/kubens

# 활용 방법
kubectx             # 현재 연결 가능한 클러스터 목록 확인 및 전환
kubens [네임스페이스]  # 해당 네임스페이스를 기본값으로 고정 (매번 -n 입력 불필요)

```

---

### 4. kubectl 운영 명령어 도구 종합 비교표

| 도구 (Tool) | 핵심 명령어 및 주요 옵션 | 주요 목적 (Primary Purpose) | 실행 위치 |
| --- | --- | --- | --- |
| **`kubeadm`** | • **`init`**: `--pod-network-cidr`, `--apiserver-advertise-address`<br>

<br>• **`join`**: `--token`, `--discovery-token-ca-cert-hash`<br>

<br>• **`reset`**: `--force`<br>

<br>• **`upgrade`**: `plan`, `apply` | 클러스터 구축, 확장, 버전 업그레이드 | 마스터/워커 노드 직접 실행 |
| **`kubectl`** | • **`get`**: `-n [NS]`, `-o wide/yaml/json`<br>

<br>• **`describe`**: 상세 상태 및 이벤트 확인<br>

<br>• **`apply`**: `-f [파일]` (YAML 반영)<br>

<br>• **`logs`**: `-f` (실시간), `--tail` (마지막 줄)<br>

<br>• **`exec`**: `-it [POD] -- [명령]` | Pod, Service 등 쿠버네티스 객체 생성 및 관리 | 사용자 PC 또는 마스터 노드 |
| **`kubelet`** | • **`--kubeconfig`**: 인증 정보 경로<br>

<br>• **`--config`**: 상세 설정 YAML 경로<br>

<br>• **`--container-runtime-endpoint`**: 런타임 소켓 경로<br>

<br>• **`--node-ip`**: 특정 노드 IP 강제 지정 | 노드 내 컨테이너 실행 상태 유지 및 관리 | 각 노드 (systemd 서비스) |
| **`crictl`** | • **`ps`**: `-a` (정지된 컨테이너 포함)<br>

<br>• **`images`**: 이미지 목록 확인<br>

<br>• **`inspect`**: 상세 JSON 정보<br>

<br>• **`stats`**: 실시간 리소스 사용량 | 컨테이너 런타임(containerd 등) 직접 점검 | 각 워커 노드 |

---

### AWS 비용 및 유료 전환 주의사항

* **EKS 관리 비용**: AWS EKS를 이용하면 컨트롤 플레인 관리가 불필요하지만, 클러스터당 **시간당 $0.10**의 요금이 청구됩니다.
* **CloudShell 사용**: AWS 웹 콘솔 내 CloudShell을 사용하면 추가 인스턴스 비용 없이 `kubectl` 최적화 환경을 테스트할 수 있으나, 세션 종료 시 설정이 초기화될 수 있으므로 `.bashrc` 설정을 스크립트화해 두는 것이 좋습니다.
* **EBS 용량**: `crictl` 등으로 대용량 로그를 점검할 때 워커 노드(EC2)의 **EBS 볼륨**이 꽉 차면 인스턴스가 멈출 수 있으므로 사용하지 않는 이미지는 주기적으로 정리해야 합니다.

Next Step: 쿠버네티스 YAML 매니페스트 기본 구조 및 작성법

---

*개인별 맞춤 설정에 따라 최적화 실습 과정을 정리하였으며, 요청하신 명령어 종합 비교표를 포함하였습니다.*

Next Step: YAML 매니페스트 작성법
