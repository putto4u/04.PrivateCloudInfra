## λ°°ν¬ μΌμ‹ μ¤‘μ§€(Pause) λ° μ¬κ°(Resume)λ¥Ό ν™μ©ν• μΉ΄λ‚λ¦¬ λ°°ν¬

μΏ λ²„λ„¤ν‹°μ¤ λ””ν”λ΅μ΄λ¨ΌνΈμ **Pause(μΌμ‹ μ¤‘μ§€)**μ™€ **Resume(μ¬κ°)** κΈ°λ¥μ„ ν™μ©ν•λ©΄, λ³„λ„μ λ³µμ΅ν• λ„κµ¬(Istio, ArgoCD λ“±) μ—†μ΄λ„ **μΉ΄λ‚λ¦¬ λ°°ν¬(Canary Deployment)**μ ν¨κ³Όλ¥Ό λ‚Ό μ μμµλ‹λ‹¤. μ΄λ” μƒ λ²„μ „μ μν–¥μ„ μ†μμ μ‚¬μ©μμ—κ²λ§ λ¨Όμ € ν…μ¤νΈν•΄ λ³΄κ³ μ ν•  λ• λ§¤μ° μ μ©ν•©λ‹λ‹¤.

---

### 1. μΉ΄λ‚λ¦¬ λ°°ν¬ λ©”μ»¤λ‹μ¦ (Pause/Resume λ°©μ‹)

λ””ν”λ΅μ΄λ¨ΌνΈλ¥Ό μ—…λ°μ΄νΈν•λ” λ„μ¤‘μ— 'μΌμ‹ μ¤‘μ§€'λ¥Ό κ±Έλ©΄, μΏ λ²„λ„¤ν‹°μ¤λ” μƒλ΅μ΄ λ²„μ „μ ν¬λ“λ¥Ό μΌλ¶€λ§ μƒμ„±ν• μƒνƒμ—μ„ μ—…λ°μ΄νΈ ν”„λ΅μ„Έμ¤λ¥Ό λ©μ¶¥λ‹λ‹¤. μ΄λ• ν΄λ¬μ¤ν„°μ—λ” **κµ¬λ²„μ „ ν¬λ“μ™€ μ‹ λ²„μ „ ν¬λ“κ°€ κ³µμ΅΄**ν•κ² λλ©°, μ„λΉ„μ¤(Service)λ¥Ό ν†µν•΄ λ“¤μ–΄μ¨ νΈλν”½μ€ μμ—°μ¤λ½κ² λ‘ λ²„μ „μΌλ΅ λ¶„μ‚°λ©λ‹λ‹¤.

---

### 2. μ‹¤μ „ λ‹¨κ³„λ³„ λ…λ Ήμ–΄

κ°•μ‚¬λ‹κ»μ„ μκ°•μƒλ“¤κ³Ό ν•¨κ» μ‹¤μµν•μ‹¤ μ μλ” λ‹¨κ³„λ³„ μ‹λ‚λ¦¬μ¤μ…λ‹λ‹¤. (μ: `nginx:1.14`μ—μ„ `1.15`λ΅ μ—…λ°μ΄νΈ)

| λ‹¨κ³„ | μ‹¤ν–‰ λ…λ Ήμ–΄ | μ„¤λ… |
| --- | --- | --- |
| **1. μ΄λ―Έμ§€ μ—…λ°μ΄νΈ μ‹μ‘** | `kubectl set image deploy/web nginx=nginx:1.15` | μ—…λ°μ΄νΈλ¥Ό νΈλ¦¬κ±°ν•©λ‹λ‹¤. |
| **2. μ¦‰μ‹ μΌμ‹ μ¤‘μ§€** | `kubectl rollout pause deploy/web` | μ—…λ°μ΄νΈκ°€ μ™„λ£λκΈ° μ „μ— μ¦‰μ‹ μ¤‘λ‹¨ν•©λ‹λ‹¤. |
| **3. μƒνƒ ν™•μΈ** | `kubectl get pods` | μ‹ λ²„μ „ ν¬λ“ 1~2κ°μ™€ κµ¬λ²„μ „ ν¬λ“λ“¤μ΄ μ„μ—¬ μλ”μ§€ ν™•μΈν•©λ‹λ‹¤. |
| **4. νΈλν”½ ν…μ¤νΈ** | (μ„λΉ„μ¤ IP μ ‘μ† ν…μ¤νΈ) | μ†μμ μ‹ λ²„μ „ ν¬λ“λ΅ μ μ…λλ” νΈλν”½μ λ΅κ·Έλ‚ μ¤λ¥ μ—¬λ¶€λ¥Ό μ κ²€ν•©λ‹λ‹¤. |
| **5. λ°°ν¬ μ™„λ£(μ¬κ°)** | `kubectl rollout resume deploy/web` | ν…μ¤νΈ κ²°κ³Όκ°€ μ •μƒμ΄λΌλ©΄ λ‚λ¨Έμ§€ ν¬λ“λ“¤λ„ μ—…λ°μ΄νΈν•©λ‹λ‹¤. |

---

### 3. μΉ΄λ‚λ¦¬ λΉ„μ¨ μ΅°μ • (Strategy ν™μ©)

λ‹¨μν Pauseλ¥Ό κ±°λ” κ²ƒλ³΄λ‹¤, `maxSurge`μ™€ `maxUnavailable` μ„¤μ •μ„ μ •κµν•κ² μ΅°μ •ν•λ©΄ μΉ΄λ‚λ¦¬ ν…μ¤νΈ μ‹μ νΈλν”½ λΉ„μ¨μ„ λ” μ„Έλ°€ν•κ² κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤.

```yaml
spec:
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1           # μ—…λ°μ΄νΈ μ¤‘ μ¶”κ°€λ΅ μƒμ„±λ  μ μλ” ν¬λ“ μµλ€ μ
      maxUnavailable: 0     # μ—…λ°μ΄νΈ μ¤‘ μ‚¬μ©ν•  μ μ—†λ” μƒνƒκ°€ λμ–΄λ„ λλ” ν¬λ“ μ

```

* **μ „λ¬Έκ°€ ν**: `maxSurge: 1`κ³Ό `maxUnavailable: 0`μΌλ΅ μ„¤μ •ν•κ³  Pauseλ¥Ό κ±Έλ©΄, μ „μ²΄ 10κ°μ ν¬λ“ μ¤‘ λ‹¨ 1κ°λ§ μ‹ λ²„μ „μΌλ΅ κµμ²΄λ μƒνƒ(`1:10` λΉ„μ¨)μ—μ„ μΉ΄λ‚λ¦¬ ν…μ¤νΈλ¥Ό μν–‰ν•  μ μμµλ‹λ‹¤.

---

### 4. μΉ΄λ‚λ¦¬ λ°°ν¬μ μ¥μ κ³Ό ν•κ³„

* **μ¥μ **:
* μ¶”κ°€μ μΈ λ¦¬μ†μ¤λ‚ μ†”λ£¨μ… λ„μ… μ—†μ΄ κΈ°λ³Έ `kubectl`λ§μΌλ΅ κµ¬ν„ κ°€λ¥ν•©λ‹λ‹¤.
* μ΄μ λ¦¬μ¤ν¬λ¥Ό μ¤„μ΄λ©΄μ„ μ‹¤μ  νΈλν”½ κΈ°λ°μ κ²€μ¦μ΄ κ°€λ¥ν•©λ‹λ‹¤.


* **ν•κ³„**:
* νΈλν”½μ μ •ν™•ν• κ°€μ¤‘μΉ(μ: λ”± 5%λ§ λ³΄λ‚΄κΈ°) μ΅°μ μ΄ μ–΄λ µμµλ‹λ‹¤. (ν¬λ“ κ°μ λΉ„μ¨λ΅λ§ κ²°μ •λ¨)
* μ‚¬μ©μ μ„Έμ… μ μ§€(Sticky Session)κ°€ λ³΄μ¥λμ§€ μ•μ•„ μ‹ /κµ¬ λ²„μ „μ„ μ™”λ‹¤ κ°”λ‹¤ ν•  μ μμµλ‹λ‹¤.



---

### π’΅ μ‹¤λ¬΄ μ „λ¬Έκ°€μ ν: λ΅¤λ°±κ³Όμ μ—°κ³„

μΉ΄λ‚λ¦¬ ν…μ¤νΈ μ¤‘ μ‹ λ²„μ „μ—μ„ μ—λ¬ λ΅κ·Έκ°€ λ°κ²¬λλ‹¤λ©΄, κ³ λ―Όν•μ§€ λ§κ³  `kubectl rollout undo deployment/web`μ„ μ‹¤ν–‰ν•μ„Έμ”. Pause μƒνƒμ—μ„λ„ `undo` λ…λ Ήμ–΄λ” μ ν¨ν•λ©°, μƒμ„±λμ—λ μ†μμ μ‹ λ²„μ „ ν¬λ“λ¥Ό μ¦‰μ‹ μ κ±°ν•κ³  μ•μ •μ μΈ κµ¬λ²„μ „μΌλ΅ 100% λ³µκµ¬ν•©λ‹λ‹¤.

---

### β οΈ λΉ„μ© λ° μ λ£ μ „ν™ μ£Όμμ‚¬ν•­

* **μΌμ‹μ μΈ λ¦¬μ†μ¤ μ¦κ°€**: `maxSurge`λ¥Ό ν™μ©ν•μ—¬ μΉ΄λ‚λ¦¬ λ°°ν¬λ¥Ό μ§„ν–‰ν•  κ²½μ°, μ—…λ°μ΄νΈ κ³Όμ • λ™μ• μ„¤μ •ν• κ°’λ§νΌμ **μ¶”κ°€ ν¬λ“κ°€ μƒμ„±**λ©λ‹λ‹¤. AWS EKSμ κ²½μ° μ΄λ΅ μΈν•΄ λ…Έλ“μ λ¦¬μ†μ¤κ°€ κ½‰ μ°¨κ² λλ©΄ **μƒλ΅μ΄ EC2 μΈμ¤ν„΄μ¤κ°€ μ¶”κ°€λ΅ ν”„λ΅λΉ„μ €λ‹**λμ–΄ λΉ„μ©μ΄ λ°μƒν•  μ μμµλ‹λ‹¤.
* **λ°μ΄ν„° μ „μ†΅ λΉ„μ©**: μ‹ λ²„μ „ ν…μ¤νΈλ¥Ό μ„ν•΄ μ™Έλ¶€μ—μ„ λ€λ‰μ ν…μ¤νΈ νΈλν”½μ„ μ μ…μ‹ν‚¬ κ²½μ°, AWS **Data Transfer In/Out λΉ„μ©**μ΄ λ°μƒν•λ―€λ΅ μ£Όμκ°€ ν•„μ”ν•©λ‹λ‹¤.

---

**Next Step: μΉ΄λ‚λ¦¬ λ°°ν¬ μλ™ν™”μ™€ λ¨λ‹ν„°λ§ μ—°λ™**

Next Step: **Prometheus λ΅κ·Έ λ¨λ‹ν„°λ§ μ—°λ™** | **λ΅¤λ§ μ—…λ°μ΄νΈ νλΌλ―Έν„° μµμ ν™”** | **Blue/Green λ°°ν¬ λ°©μ‹ λΉ„κµ** Would you like me to: **κ°•μ κµμ¬μ© μΉ΄λ‚λ¦¬ λ°°ν¬ μ‹λ‚λ¦¬μ¤ ν€΄μ¦**, **Blue/Green λ°°ν¬ μμ  κµ¬μ„±**?
