

# Hello World! 만들기

```
kubectl run hello-world --image=hello-world --restart=Never (또는 Always)
 pod/hello-world created            # 이게 끝. 웹서버 아님, 단순 테스트

kubectl get pod
kucectl get all
```
<br>
<br>
<br>
<br>
<br>

`kubectl run`으로 생성한 `hello-world` 이미지는 웹 서버가 아니라, 실행 후 메시지만 출력하고 바로 종료되는 **단발성 실행 컨테이너**입니다. 
따라서 브라우저로 확인하기 위해서는 **Nginx**나 **Apache**와 같은 웹 서버 이미지를 사용해야 하며, 외부에서 접근할 수 있도록 **Service(서비스)**를 설정해야 합니다.

실제 웹 서비스를 배포하고 브라우저로 확인하는 과정을 단계별로 설명합니다.

---

## 쿠버네티스 웹 서비스 배포 및 브라우저 확인

단순한 파드 생성만으로는 외부 브라우저에서 접근할 수 없습니다. 외부 노출을 위해 **NodePort** 또는 **LoadBalancer** 설정이 필요합니다.

### 1. 웹 서버 파드 생성 (Nginx 예시)

브라우저에서 확인 가능한 화면을 제공하는 Nginx 서버를 실행합니다.

```bash
# nginx 이미지를 사용하여 파드 생성
kubectl run my-web --image=nginx --restart=Always

```

* `hello-world` 대신 `nginx`를 사용하는 이유는 웹 서버가 백그라운드에서 계속 실행되어야 브라우저 접속이 가능하기 때문입니다.

<br>
<br>
<br>
<br>
<br>

### 2. 서비스를 통한 외부 노출 (Expose)

파드는 클러스터 내부 IP만 가지므로, 외부 브라우저가 접속할 수 있도록 통로를 열어줍니다.

```bash
# 80포트를 노출하는 NodePort 서비스 생성
kubectl expose pod my-web --port=80 --target-port=80 --type=NodePort

```
<br>
<br>
<br>
<br>
<br>
### 3. 접속 정보 확인

브라우저 주소창에 입력할 **노드 IP**와 **할당된 포트 번호**를 확인합니다.

```bash
# 서비스 상태 확인
kubectl get service my-web

```

* **PORT(S)** 항목을 보면 `80:3xxxx/TCP` 형태로 되어 있습니다. 여기서 `3xxxx` 부분이 브라우저로 접속할 때 사용할 **NodePort**입니다.
<br>
<br>
<br>
<br>
<br>
### 4. 브라우저 접속 방법

확인된 정보를 조합하여 브라우저에 입력합니다.

* **접속 주소:** `http://<노드-IP>:<확인된-NodePort>`
* **예시:** `http://10.0.2.4:31234`

> **Tip:** 노드 IP를 모를 경우 `kubectl get nodes -o wide` 명령어로 확인할 수 있습니다.

---
<br>
<br>
<br>
<br>
<br>
### 5. 실전 팁: `Port-Forward` 활용 (가장 간편한 방법)

서비스 설정이 번거롭다면, 로컬 PC의 포트와 파드의 포트를 임시로 연결하여 즉시 확인할 수 있습니다.

```bash
# 로컬의 8080 포트를 파드의 80 포트로 전달
kubectl port-forward pod/my-web 8080:80

```

* 실행 후 브라우저에서 `http://localhost:8080`으로 접속하면 바로 확인 가능합니다. (실습 및 디버깅 시 유용)

---
<br>
<br>
<br>
<br>
<br>
### 6. 자주 실수하는 부분

* **방화벽 설정:** AWS나 IDC 환경인 경우, 할당된 NodePort(30000~32767 사이)에 대한 인바운드 보안 그룹/방화벽이 열려 있어야 합니다.
* **파드 상태:** `kubectl get pods`로 확인했을 때 `STATUS`가 `Running`이어야 접속이 가능합니다. `hello-world`처럼 `Completed` 된 파드는 접속할 수 없습니다.

> [!NOTE]
> **과금 및 유료 서비스 안내**
> 만약 서비스를 `--type=LoadBalancer`로 생성한다면, AWS EKS나 GCP GKE 환경에서는 실제 외부 로드밸런서(ELB/NLB)가 생성되며 **시간당 고정 비용**이 발생합니다. 학습용으로는 비용이 발생하지 않는 `NodePort`나 `port-forward` 방식을 권장합니다.

---

Next Step: **Kubernetes Service Types (ClusterIP, NodePort, LoadBalancer)**
