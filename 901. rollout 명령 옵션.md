# Kubernetes Rollout 명령 옵션 가이드

`kubectl rollout` 명령어는 디플로이먼트(Deployment), 데몬셋(DaemonSet), 스테이트풀셋(StatefulSet) 등 리소스의 업데이트 상태를 확인하고 관리하는 데 사용됩니다.

---

### 1. rollout 주요 서브 명령어 및 옵션

| 서브 명령어 | 설명 | 주요 옵션 및 용도 |
| --- | --- | --- |
| **`status`** | 리소스의 업데이트 진행 상태를 실시간으로 확인합니다. | `kubectl rollout status deployment/my-app` |
| **`history`** | 리소스의 업데이트 이력(리비전)을 확인합니다. | `--revision=N`: 특정 리비전의 상세 설정 확인 |
| **`undo`** | 이전 버전으로 롤백합니다. | `--to-revision=N`: 특정 과거 시점으로 롤백 |
| **`pause`** | 진행 중인 업데이트를 일시 중지합니다. | Canary 배포 중 상태 점검이 필요할 때 사용 |
| **`resume`** | 일시 중지된 업데이트를 다시 재개합니다. | `pause`로 멈춘 롤아웃을 다시 진행 |
| **`restart`** | 리소스를 강제로 재시작합니다. | 설정값 변경 없이 파드(Pod)만 순차적으로 재생성 |

---

### 2. 실전 활용 예시 테이블

| 상황별 요구사항 | 실행 명령어 |
| --- | --- |
| **실시간 상태 모니터링** | `kubectl rollout status deployment/<name>` |
| **배포 이력 리스트 확인** | `kubectl rollout history deployment/<name>` |
| **바로 직전 버전으로 복구** | `kubectl rollout undo deployment/<name>` |
| **특정 버전(3번)으로 복구** | `kubectl rollout undo deployment/<name> --to-revision=3` |
| **리소스 순차적 재시작** | `kubectl rollout restart deployment/<name>` |

---

### 3. 관리자 팁: Revision History 관리

Kubernetes는 기본적으로 무한정 리비전을 저장하지 않습니다. `spec.revisionHistoryLimit` 설정을 통해 보관할 히스토리 개수를 지정할 수 있으며, 너무 많이 남겨둘 경우 클러스터 리소스를 소모하므로 적절한 값(보통 10개 내외)을 유지하는 것이 좋습니다.

```yaml
spec:
  replicas: 3
  revisionHistoryLimit: 10  # 보관할 과거 버전 개수
  template:
    ...

```

---

Next Step: Kubernetes 배포 전략 (RollingUpdate vs Recreate)

---

요청하신 `rollout` 옵션을 표 형식으로 정리했습니다. 강의 시 학생들이 실습에서 가장 많이 사용하는 명령어 위주로 구성했습니다.

Next Step: Canary 및 Blue/Green 배포 구현 방법
