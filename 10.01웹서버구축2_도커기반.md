## Nginx: 패키지 설치 vs Docker 컨테이너 비교

실무에서 Nginx를 운영할 때 OS에 직접 설치하는 방식과 Docker 컨테이너를 사용하는 방식은 각각 명확한 장단점이 있습니다. 결론부터 말씀드리면, **배포의 편의성과 환경 일관성 측면에서는 Docker를 사용하는 것이 압도적으로 유리합니다.**

---

### 1. 방식별 비교 분석

| 비교 항목 | OS 직접 설치 (APT/YUM) | Docker 컨테이너 사용 |
| --- | --- | --- |
| **설치 속도** | 의존성 패키지 설치 필요로 상대적으로 느림 | 이미지 기반으로 수 초 내 실행 가능 |
| **환경 격리** | OS 전역 설정에 영향을 받음 | 호스트 OS와 격리된 독립 환경 유지 |
| **버전 관리** | 여러 버전을 동시에 띄우기 어려움 | 태그(Tag)를 통해 다양한 버전 병행 운용 가능 |
| **이식성** | 서버 교체 시 재설정 과정이 복잡함 | `docker-compose.yml` 파일 하나로 어디든 복제 가능 |
| **리소스 관리** | 호스트 리소스를 직접 공유 | 컨테이너 단위로 CPU, 메모리 제한 가능 |

---

### 2. Docker 기반 Nginx 구축 (CLI 실습)

Docker를 사용하여 Nginx를 실행할 경우, 기존의 복잡한 설정 과정을 단 몇 줄의 명령어로 대체할 수 있습니다.

```bash
# 1. Nginx 공식 이미지 다운로드 및 컨테이너 실행
# -p 80:80 : 호스트의 80번 포트와 컨테이너의 80번 포트 연결
# --name my-nginx : 컨테이너 이름을 my-nginx로 지정
# -d : 백그라운드에서 실행
docker run --name my-nginx -p 80:80 -d nginx

# 2. 호스트의 설정 파일을 컨테이너에 동기화 (Volume Mount)
# 실무에서는 설정 파일(conf)과 웹 리소스(html)를 호스트 폴더와 연결하여 관리합니다.
docker run --name custom-nginx \
  -v /path/to/your/html:/usr/share/nginx/html:ro \
  -v /path/to/your/nginx.conf:/etc/nginx/nginx.conf:ro \
  -p 80:80 -d nginx

```

---

### 3. Docker 사용 시 유료 서비스 및 비용 주의사항 (AWS 기준)

Docker를 활용해 Nginx를 띄울 때, 인프라 구성에 따라 다음과 같은 비용이 발생할 수 있습니다.

* **AWS ECR (Elastic Container Registry)**: 직접 커스텀한 Nginx 이미지를 저장할 경우, 저장 용량(GB당)과 데이터 전송량에 따라 **유료 과금**됩니다.
* **AWS Fargate (Serverless)**: EC2 없이 컨테이너를 바로 띄우는 Fargate 사용 시, 할당된 vCPU와 메모리 리소스 양에 따라 **초 단위로 과금**됩니다.
* **AWS App Runner**: 컨테이너화된 웹 앱을 배포하는 관리형 서비스로, 인스턴스 가동 시간 및 요청 횟수에 따라 **유료 전환**됩니다.

---

### 4. 언제 Docker를 쓰는 것이 더 좋은가?

1. **마이크로서비스 아키텍처(MSA)**: 여러 개의 웹 서비스와 프록시를 관리해야 할 때.
2. **CI/CD 자동화**: 빌드된 이미지를 테스트 서버와 운영 서버에 동일하게 배포해야 할 때.
3. **빠른 복구**: 서버 장애 시 새로운 인스턴스에서 즉시 동일한 설정을 복원해야 할 때.

반면, 단일 서버에서 아주 가벼운 용도로 Nginx만 고정적으로 사용한다면 OS 패키지 방식이 리소스 오버헤드가 적어 유리할 수 있습니다.

Next Step: Docker Compose를 활용한 Nginx와 Web Application 통합 관리

설정하신 규칙에 따라 깃허브 포맷으로 작성하였으며, Docker 사용 시 발생 가능한 유료 서비스 항목을 명시했습니다.

Next Step: Docker Compose 및 컨테이너 오케스트레이션 기초
