VirtualBox와 같은 가상 환경에서 디스크 용량을 50GB로 할당했음에도 불구하고, 실제 OS 내부(`df -h`)에서 루트(`/`) 파티션이 25GB(절반) 정도만 인식되는 현상은 매우 흔한 케이스입니다.

이는 주로 **Ubuntu 설치 시 'LVM(Logical Volume Manager)' 설정이 기본값으로 전체 디스크의 50%만 할당하도록 되어 있기 때문**입니다. 나머지 25GB는 사용되지 않는 'Free PE(Physical Extents)' 상태로 LVM 볼륨 그룹 안에 잠겨 있는 것입니다.

재설치 없이 명령어로 즉시 나머지 용량을 확장하는 방법을 단계별로 안내해 드립니다.

---

## 1. 현재 상태 확인

먼저 어떤 논리 볼륨(LV)을 확장해야 하는지 확인합니다.

```bash
df -h

```

출력 내용 중 `/dev/mapper/ubuntu--vg-ubuntu--lv` (이름은 약간 다를 수 있음)가 루트(`/`)에 마운트되어 있고, 용량이 예상보다 적은지 확인하세요.

그 다음, 볼륨 그룹에 남은 여유 공간이 있는지 확인합니다.

```bash
sudo vgs

```

`VFree` 항목에 남은 용량(약 25G 등)이 표시된다면 아래 과정을 진행하면 됩니다.

---

## 2. 논리 볼륨(LV) 확장

볼륨 그룹의 남은 모든 공간을 해당 논리 볼륨에 할당합니다.

```bash
sudo lvextend -l +100%FREE /dev/mapper/ubuntu--vg-ubuntu--lv

```

> **Tip:** `/dev/mapper/...` 경로는 위 `df -h`에서 확인한 본인의 루트 파일 시스템 경로를 입력하세요.

---

## 3. 파일 시스템 사이즈 재조정 (Resize)

볼륨의 크기는 커졌지만, 실제 파일 시스템이 이를 인식하도록 리사이징해야 합니다. (Ubuntu 기본인 ext4 기준)

```bash
sudo resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv

```

*만약 파일 시스템이 XFS라면 `sudo xfs_growfs /` 명령어를 사용해야 합니다.*

---

## 4. 최종 결과 확인

이제 다시 용량을 확인해 보면 50GB 전체가 반영된 것을 볼 수 있습니다.

```bash
df -h

```

---

### 💡 실전 팁: 왜 이런 일이 발생하나요?

Ubuntu 서버 설치 프로그램(Subiquity)은 LVM을 사용할 때 만약의 상황(스냅샷, 다른 파티션 추가 등)을 대비해 **전체 용량의 절반만 할당하는 것을 기본값**으로 제안합니다.

강의 중 수강생들이 동일한 문제를 겪는다면, 설치 단계의 **[Storage Configuration]** 화면에서 `Size` 부분을 수동으로 최대치로 수정하거나, 설치 후 위 명령어를 실행하도록 가이드하시면 좋습니다.

---

**Next Step: LVM 구조와 물리 볼륨(PV)/볼륨 그룹(VG)/논리 볼륨(LV)의 개념**

* 수행 결과에 문제가 있거나 특정 에러 메시지가 출력되면 말씀해 주세요. 바로 수정해 드리겠습니다.
