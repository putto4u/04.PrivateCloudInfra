쿠버네티스를 처음 접할 때 `apiVersion`은 단순한 코드처럼 보이지만, 사실은 **"이 리소스를 관리하는 부서(Group)와 그 부서의 매뉴얼 버전(Version)"**을 지정하는 것과 같습니다.

학습자들이 더 쉽게 이해할 수 있도록 일상적인 비유와 실무 사례를 들어 자세히 정리해 보겠습니다.

---

## 1. 일상 비유로 이해하는 apiVersion

쿠버네티스라는 거대한 회사가 있다고 가정해 봅시다. 이 회사에는 여러 전문 부서가 있습니다.

* **인사팀(Core):** 직원(Pod), 부서(Namespace) 같은 가장 기초적인 것을 관리합니다.
* **시설관리팀(Apps):** 사무실 배치(Deployment), 건물 유지보수(StatefulSet)를 담당합니다.
* **보안팀(Networking):** 출입 통제(NetworkPolicy), 정문 안내(Ingress)를 담당합니다.

만약 여러분이 "직원 한 명을 뽑아주세요(Pod)"라고 요청하려면 **인사팀의 최신 매뉴얼(`v1`)**을 참조해야 하고, "사무실 배치를 바꿔주세요(Deployment)"라고 하려면 **시설관리팀의 매뉴얼(`apps/v1`)**을 봐야 합니다.

---

## 2. 왜 그룹과 버전을 나누어 놓았을까? (실무적 이유)

쿠버네티스는 전 세계 개발자들이 기능을 추가하며 빠르게 발전하는 오픈소스 프로젝트입니다. 모든 기능을 한꺼번에 업데이트하면 시스템이 너무 무거워지고 혼란이 생기기 때문입니다.

1. **독립적인 발전:** `Networking` 기능이 업데이트된다고 해서 `Batch` 기능까지 멈출 필요가 없습니다. 각 그룹은 각자의 속도로 발전합니다.
2. **안전한 테스트:** 새로운 기능은 `alpha`나 `beta` 버전을 통해 충분히 검증한 뒤, 안정화되었을 때 `v1`(Stable)으로 승격시킵니다.
3. **하위 호환성 유지:** 기존에 잘 돌아가던 `v1` 리소스들은 새로운 기능이 추가되어도 영향을 받지 않고 그대로 동작할 수 있습니다.

---

## 3. 주요 apiVersion 상세 사례표

| apiVersion | 관리 그룹 | 주요 리소스 (오브젝트) | 비유 및 사례 |
| --- | --- | --- | --- |
| **`v1`** | **Core** (핵심) | `Pod`, `Service`, `Secret` | **"기초 생존 키트"**<br>

<br>가장 기본이 되는 단위들입니다. 그룹명 없이 버전만 쓰는 이유는 너무 중요해서 '본진'에 속해 있기 때문입니다. |
| **`apps/v1`** | **Apps** (앱 관리) | `Deployment`, `DaemonSet` | **"공장 자동화"**<br>

<br>파드 하나하나를 관리하는 게 아니라, "파드 3개를 항상 유지해줘" 같은 복잡한 오케스트레이션을 담당합니다. |
| **`batch/v1`** | **Batch** (일괄 처리) | `Job`, `CronJob` | **"단기 알바 / 정기 점검"**<br>

<br>24시간 떠 있는 게 아니라, 특정 업무(백업, 데이터 계산)가 끝나면 종료되는 작업을 관리합니다. |
| **`networking.k8s.io/v1`** | **Networking** | `Ingress`, `NetworkPolicy` | **"도로망과 검문소"**<br>

<br>외부에서 우리 서비스로 들어오는 길을 만들거나, 보안 규칙을 세울 때 사용합니다. |
| **`storage.k8s.io/v1`** | **Storage** | `StorageClass` | **"창고 대여"**<br>

<br>어떤 종류의 디스크(SSD, HDD)를 사용할지 정의할 때 참조합니다. |

---

## 4. 실전에서 겪는 "apiVersion" 문제 사례

강의 시 수강생들이 가장 많이 실수하는 부분 중 하나는 **"복사 붙여넣기"**에서 발생합니다.

> **사례: 인터넷의 옛날 예제를 가져왔을 때**
> 오래된 블로그 글에서는 Deployment의 apiVersion을 `extensions/v1beta1`이라고 적어둔 경우가 많습니다. 하지만 최신 쿠버네티스 버전에서 이 명령을 실행하면 **"해당 API를 찾을 수 없습니다(The server could not find the requested resource)"**라는 에러가 발생합니다.
> **해결책:** 항상 리소스를 만들기 전에 `kubectl explain [리소스명]` 명령어로 현재 클러스터가 권장하는 버전을 확인하는 습관을 들여야 합니다.

---

### 💡 전문가 팁: API 성숙도 읽는 법

* `v1alpha1`: "실험 중이니 절대 운영 서버에 쓰지 마세요."
* `v1beta1`: "거의 다 만들었으니 테스트해 보세요. 곧 정식 버전이 됩니다."
* `v1`: "믿고 쓰셔도 됩니다. 업그레이드해도 설정이 안 바뀝니다."

---

강의 교재의 흐름상, 다음 섹션에서는 이 `apiVersion`을 기반으로 실제 리소스의 이름을 짓고 라벨을 붙이는 과정을 다루면 좋습니다.

**Next Step:** Metadata 섹션 - 리소스의 이름과 라벨(Label) 관리

---

*교재 수정 요청 시 해당 부분만 깔끔하게 업데이트해 드리겠습니다.*
