쿠버네티스 컨트롤 플레인 구성 요소들이 **정적 파드(Static Pod)**로 실행 중이더라도, 결국 리눅스 시스템 입장에서는 하나의 **프로세스**일 뿐입니다. `ps` 명령어를 통해 커널 수준에서 쿠버네티스가 어떻게 돌고 있는지 확인하는 방법을 정리해 드립니다.

---

### 1. 주요 컴포넌트 한눈에 찾기

`grep`을 활용하여 쿠버네티스 핵심 프로세스들만 골라낼 수 있습니다.

```bash
ps -ef | grep kube | grep -v grep

```

* **`-ef`**: 모든 프로세스를 풀 포맷으로 보여줍니다.
* **`grep kube`**: 이름에 'kube'가 들어간 프로세스(apiserver, scheduler, controller-manager, proxy, let)를 찾습니다.
* **`grep -v grep`**: `grep` 명령어 자체는 결과에서 제외합니다.

### 2. 프로세스별 상세 분석

#### ① kubelet (가장 중요)

`kubelet`은 파드가 아닌 **시스템 서비스**로 돌고 있기 때문에 `ps`로 보는 것이 가장 정확합니다.

```bash
ps -ef | grep kubelet

```

* 여기서 실행 옵션을 보면 `--config=/var/lib/kubelet/config.yaml`과 같은 설정 파일 경로와 `--container-runtime-endpoint` 등을 확인할 수 있습니다.

#### ② 컨트롤 플레인 (컨테이너화된 프로세스)

`kube-apiserver` 등은 컨테이너 안에서 실행되지만, 호스트 OS에서도 프로세스로 보입니다.

```bash
ps -ef | grep kube-apiserver

```

* **강의 포인트:** 실행 옵션 중 `--etcd-servers`, `--service-cluster-ip-range`, `--admission-control` 등 핵심 설정값들이 명령줄 인자로 길게 늘어져 있는 것을 수강생들에게 보여주면 좋습니다.

#### ③ etcd (데이터베이스)

```bash
ps -ef | grep etcd

```

* `etcd`가 사용하는 인증서 경로와 데이터 저장 디렉토리(`--data-dir`) 정보를 확인할 수 있습니다.

### 3. 부모-자식 관계 확인 (pstree)

프로세스가 어떤 순서로 실행되었는지 계통도로 보면 더 명확합니다.

```bash
# 설치가 안 되어 있다면: sudo apt install psmisc
pstree -p | grep kube

```

* `containerd`나 `docker` 하위에 어떤 `kube` 관련 프로세스들이 매달려 있는지 시각적으로 파악할 수 있습니다.

### 4. 실시간 자원 점유율 확인

특정 컴포넌트가 CPU나 메모리를 얼마나 먹고 있는지 보려면 `top`이나 `htop`을 활용하세요.

```bash
top -p $(pgrep -d',' -f kube)

```

* `pgrep`으로 'kube' 관련 PID만 뽑아 `top`에서 실시간 모니터링합니다.

---

> **실전 팁:**
> "쿠버네티스도 결국 리눅스 위에서 돌아가는 **프로세스의 집합**일 뿐이다"라는 점을 강조해 주세요. `kubectl`이 먹통일 때 `ps -ef | grep kube`를 쳤는데 아무것도 안 나온다면, 그건 쿠버네티스 설정 문제가 아니라 서비스 자체가 죽은 운영체제 레벨의 문제입니다.

**Next Step:** `journalctl -u kubelet`으로 시스템 서비스 로그 확인하기 ---

