
## Kubernetes(k8s) 아키텍처의 이해

쿠버네티스는 컨테이너화된 애플리케이션을 자동으로 배포, 확장 및 관리하는 **오케스트레이션 플랫폼**입니다. 전체 구조는 크게 **Control Plane(마스터 노드)**과 **Worker Node(워커 노드)**라는 두 가지 논리적 영역으로 나뉩니다.

---

### 1. 전체 구조 개요

쿠버네티스 클러스터는 여러 대의 컴퓨터(노드)가 하나의 유기체처럼 동작하도록 설계되었습니다. 마스터는 클러스터를 관리하고, 워커 노드는 실제 컨테이너를 실행합니다.


<img width="990" height="480" alt="image" src="https://github.com/user-attachments/assets/3a526d7c-0132-4bce-9e82-b355458632f2" />

---

### 2. Control Plane (마스터 노드) 구성 요소

클러스터의 '두뇌' 역할을 하며, 전체적인 상태를 결정하고 제어합니다.

* **kube-apiserver**: 쿠버네티스의 프론트엔드로, 모든 내부 및 외부 요청은 이 서버를 통해 처리됩니다. (REST API 제공)
* **etcd**: 클러스터의 모든 상태 데이터를 저장하는 **Key-Value 저장소**입니다. 고가용성을 위해 분산 저장되며, 일관성이 매우 중요합니다.
* **kube-scheduler**: 새롭게 생성된 Pod(컨테이너 그룹)를 어떤 노드에 배치할지 결정합니다. 노드의 자원 상태(CPU, 메모리)를 고려합니다.
* **kube-controller-manager**: 클러스터의 상태를 지속적으로 모니터링하고, 원하는 상태(Desired State)와 현재 상태가 일치하도록 조절합니다. (예: 노드 컨트롤러, 잡 컨트롤러)
* **cloud-controller-manager**: AWS, GCP, Azure와 같은 클라우드 서비스의 리소스(로드밸런서, 스토리지 등)와 연결해주는 역할을 합니다.

---

### 3. Worker Node (워커 노드) 구성 요소

실제 비즈니스 로직(컨테이너)이 돌아가는 하드웨어 혹은 가상 머신입니다.

* **kubelet**: 각 노드에서 실행되는 에이전트입니다. 마스터로부터 전달받은 명령에 따라 컨테이너가 잘 실행되고 있는지 관리하고 상태를 보고합니다.
* **kube-proxy**: 노드 내의 네트워크 규칙을 관리합니다. 외부에서 들어오는 트래픽을 적절한 Pod로 전달하는 로드밸런싱 역할을 수행합니다.
* **Container Runtime**: 컨테이너를 실제로 실행하는 소프트웨어입니다. (Docker, **containerd**, CRI-O 등)
* **Pod**: 쿠버네티스에서 생성하고 관리할 수 있는 **최소 배포 단위**입니다. 하나 이상의 컨테이너가 포함됩니다.

---
<img width="1064" height="569" alt="image" src="https://github.com/user-attachments/assets/351a05a1-aa0d-4584-9cae-92cf92a2e55b" />


### 4. 핵심 동작 원리: 선언적 API (Declarative API)

쿠버네티스는 "무엇을 하라"는 명령이 아니라 **"이런 상태가 되어야 한다"**는 선언을 바탕으로 동작합니다.

1. 사용자가 YAML 파일을 통해 `kube-apiserver`에 '원하는 상태'를 전달합니다.
2. 해당 데이터가 `etcd`에 저장됩니다.
3. `controller-manager`가 현재 상태가 선언된 상태와 다른지 감시합니다.
4. 차이가 발생하면 `kube-scheduler`와 `kubelet`을 통해 새로운 컨테이너를 생성하여 상태를 맞춥니다.

---
### 3. 부가 컴포넌트 (Add-ons)
클러스터의 기능을 확장하는 요소들입니다.

DNS: 대부분의 클러스터에서 반드시 필요한 구성 요소로, 쿠버네티스 서비스에 대한 DNS 레코드를 제공합니다.

대시보드: 클러스터 자원을 시각적으로 관리할 수 있는 웹 기반 UI입니다.

컨테이너 리소스 모니터링: 시계열 메트릭을 기록하여 성능을 분석합니다.

---
### 5. AWS 환경에서의 아키텍처 특징 및 비용

AWS에서 쿠버네티스를 운영할 때는 주로 **EKS(Elastic Kubernetes Service)**를 사용합니다.

* **EKS Control Plane 비용**: AWS가 마스터 노드를 대신 관리해주며, 클러스터당 **시간당 0.10 USD** 정도의 관리 비용이 발생합니다.
* **Worker Node 비용**: 실제 실행되는 EC2 인스턴스의 사양과 개수에 따라 비용이 청구됩니다. (Fargate 사용 시에는 사용한 자원만큼 과금)
* **EBS/EFS 비용**: Pod에서 데이터를 저장하기 위해 볼륨을 사용하면 해당 스토리지 서비스 비용이 추가됩니다.
* **VPC Peering/NAT Gateway**: 노드 간 통신이나 외부 이미지 다운로드 시 발생하는 네트워크 트래픽 비용에 주의해야 합니다.

Next Step: 쿠버네티스 Pod 생명 주기와 서비스(Service) 타입 이해

쿠버네티스 아키텍처의 핵심 컴포넌트와 동작 원리를 정리해 드렸습니다.

## Next Step: Pod 및 Service 객체 상세 분석

*개인별 맞춤 설정에 따라 강의 교재 형식으로 작성되었으며, AWS 과금 요소를 포함하였습니다.*
